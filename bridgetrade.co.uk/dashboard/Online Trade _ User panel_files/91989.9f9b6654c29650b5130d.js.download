"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[91989],{951512:(t,e,r)=>{r.d(e,{NumericFormatter:()=>a});var i=r(831471),o=r(960521);class a{constructor(t){this._precision=t}format(t){return(void 0!==this._precision?t.toFixed(this._precision):a.formatNoE(t)).replace(".",i.formatterOptions.decimalSign)}parse(t){const e=t.replace(i.formatterOptions.decimalSign,".");let r=parseFloat(e);return this._precision&&(r=+r.toFixed(this._precision)),r}static formatNoE(t){if(!Number.isFinite(t))return String(t);const e=new o.Big(t);return e.lt(1)?e.toFixed():e.toString()}}},831471:(t,e,r)=>{r.d(e,{formatterOptions:()=>h,PriceFormatter:()=>d});var i=r(777754),o=r(960521),a=r(691520),n=r(758337),s=r(768038),c=r(331983);const l=(0,r(272001).getLogger)("Chart.PriceFormatter"),m=new RegExp(/^(-?)[0-9]+$/),h={decimalSign:".",decimalSignFractional:"'"},u=new Map;const p=new Map;function f(t,e,r,i){let o=0;if(t>0&&e>0){let e=t;for(r&&i&&(e/=i);e>1;)e/=10,o++}return o}function g(t,e){if(!(0,n.isNumber)(t))return"n/a";if(!(0,n.isInteger)(e))throw new TypeError("invalid length");if(e<0||e>24)throw new TypeError("invalid length");if(0===e)return t.toString();return("0000000000000000"+t.toString()).slice(-e)}class d{constructor(t,e,o,s,c){if(this.type="price",this._formatterErrors={custom:i.t(null,void 0,r(332061)),fraction:i.t(null,void 0,r(142015)),secondFraction:i.t(null,void 0,r(643247))},e||(e=1),(0,n.isNumber)(t)&&(0,n.isInteger)(t)||(t=100),t<0)throw new TypeError("invalid base");this._priceScale=t,this._minMove=e,this._minMove2=s,this._variableMinTickData=o||void 0===c?void 0:(0,a.makeVariableMinTickData)(NaN,c),o&&void 0!==s&&s>0&&2!==s&&4!==s&&8!==s?l.logDebug("invalid minmove2"):(this._fractional=o,this._fractionalLength=f(this._priceScale,this._minMove,this._fractional,this._minMove2))}isFractional(){return!!this._fractional}state(){return{fractional:this._fractional,fractionalLength:this._fractionalLength,minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale}}format(t,e,r,i=!0,n=!0,l=!1){let m="";t<0?(m=!1===i?"":"−",t=-t):t&&!0===e&&(m="+");let h,u=this._priceScale,p=this._minMove,g=this._fractionalLength;if(void 0!==this._variableMinTickData){const e=(0,a.getMinTick)({price:t,minTick:NaN,variableMinTickData:this._variableMinTickData,shouldCheckForEquality:!0});u=Math.pow(10,(0,c.numOfDecimalPlaces)(e)),p=(0,o.Big)(e).mul(u).toNumber(),g=f(u,p)}return h=this._fractional?m+this._formatAsFractional(t,r):m+this._formatAsDecimal({price:t,priceScale:u,minMove:p,fractionalLength:g,tailSize:r,cutFractionalByPrecision:l}),n?(0,s.forceLTRStr)(h):h}parse(t){return"+"===(t=(t=(0,s.stripLTRMarks)(t)).replace("−","-"))[0]&&(t=t.substring(1)),this._fractional?this._minMove2?this._parseAsDoubleFractional(t):this._parseAsSingleFractional(t):this._parseAsDecimal(t)}hasForexAdditionalPrecision(){return!this._fractional&&10===this._minMove2}static serialize(t){return t.state()}static deserialize(t){return new d(t.priceScale,t.minMove,t.fractional,t.minMove2)}_formatAsExponential(t){
const e=Math.floor(.75*Math.log10(this._priceScale)),r=t*Math.pow(10,e),i=`e-${e}`,o=Math.log10(this._priceScale)-e;return`${r.toFixed(o).replace(".",h.decimalSign)}${i}`}_formatAsDecimal(t){const{price:e,priceScale:r,minMove:i,fractionalLength:a=0,tailSize:n=0,cutFractionalByPrecision:s}=t;if(r>1e10)return this._formatAsExponential(e);let c;c=this._fractional?Math.pow(10,a):Math.pow(10,n)*r/(s?1:i);const l=1/c;let m;if(c>1)m=Math.floor(e);else{const t=Math.floor(Math.round(e/l)*l);m=0===Math.round((e-t)/l)?t:t+l}let u="";if(c>1){let t=s?new o.Big(e).mul(c).round(void 0,0).minus(new o.Big(m).mul(c)).toNumber():parseFloat((Math.round(e*c)-m*c).toFixed(a));t>=c&&(t-=c,m+=1);const r=s?new o.Big(t).round(a,0).toNumber():parseFloat(t.toFixed(a))*i;u=h.decimalSign+g(r,a+n),u=this._removeEndingZeros(u,n)}return m.toString()+u}_getFractPart(t,e,r){const i=[0,5],o=[0,2,5,7],a=[0,1,2,3,5,6,7,8];return 2===r?void 0===i[t]?-1:i[t]:4===r?void 0===o[t]?-1:o[t]:8===r&&2===e?void 0===a[t]?-1:a[t]:t}_formatAsFractional(t,e){const r=this._priceScale/this._minMove;let i=Math.floor(t),o=e?Math.floor(t*r)-i*r:Math.round(t*r)-i*r;o===r&&(o=0,i+=1);let a="";if(e){let n=(t-i-o/r)*r;n=Math.round(n*Math.pow(10,e)),a=g(n,e),a=this._removeEndingZeros(a,e)}if(!this._fractionalLength)throw new Error("_fractionalLength is not calculated");let n="";if(this._minMove2){const t=o%this._minMove2;o=(o-t)/this._minMove2;const e=g(o,this._fractionalLength),r=this._getFractPart(t,2,this._minMove2);n=e+h.decimalSignFractional+r}else o=this._getFractPart(o,1,this._priceScale),n=g(o*this._minMove,this._fractionalLength);return i.toString()+h.decimalSignFractional+n+a}_removeEndingZeros(t,e){for(let r=0;r<e&&"0"===t[t.length-1];r++)t=t.substring(0,t.length-1);return t}_parseAsDecimal(t){if(t.includes("e")){if(function(t){let e=u.get(t);return e||(e=new RegExp("^(-?)[0-9]+\\"+t+"[0-9]*e(-?)[0-9]+$"),u.set(t,e)),e}(h.decimalSign).exec(t)){const e=parseFloat(t.replace(h.decimalSign,"."));return{value:e,res:!0,suggest:this.format(e)}}return{error:this._formatterErrors.custom,res:!1}}let e=m.exec(t);if(e){const e=parseFloat(t);return{value:e,res:!0,suggest:this.format(e)}}if(e=function(t){let e=p.get(t);return e||(e=new RegExp("^(-?)[0-9]+\\"+h.decimalSign+"[0-9]*$"),p.set(t,e)),e}(h.decimalSign).exec(t),e){const e=parseFloat(t.replace(h.decimalSign,"."));return{value:e,res:!0,suggest:this.format(e)}}return{error:this._formatterErrors.custom,res:!1}}_patchFractPart(t,e,r){const i={0:0,5:1},o={0:0,2:1,5:2,7:3},a={0:0,1:1,2:2,3:3,5:4,6:5,7:6,8:7};return 2===r?void 0===i[t]?-1:i[t]:4===r?void 0===o[t]?-1:o[t]:8===r&&2===e?void 0===a[t]?-1:a[t]:t}_parseAsSingleFractional(t){let e=m.exec(t);if(e){const e=parseFloat(t);return{value:e,res:!0,suggest:this.format(e)}}if(e=new RegExp("^(-?)([0-9]+)\\"+h.decimalSignFractional+"([0-9]+)$").exec(t),e){const t=!!e[1],r=parseInt(e[2]),i=this._priceScale,o=this._patchFractPart(parseInt(e[3]),1,i);if(o>=i||o<0)return{error:this._formatterErrors.fraction,res:!1};let a=r+o/i;return t&&(a=-a),{value:a,res:!0,suggest:this.format(a)}}
return{error:this._formatterErrors.custom,res:!1}}_parseAsDoubleFractional(t){let e=m.exec(t);if(e){const e=parseFloat(t);return{value:e,res:!0,suggest:this.format(e)}}if(e=new RegExp("^(-?)([0-9]+)\\"+h.decimalSignFractional+"([0-9]+)\\"+h.decimalSignFractional+"([0-9]+)$").exec(t),e){const t=!!e[1],r=parseInt(e[2]),i=void 0!==this._minMove2?this._minMove2:NaN,o=this._priceScale/i,a=this._minMove2,n=this._patchFractPart(parseInt(e[3]),1,o),s=this._patchFractPart(parseInt(e[4]),2,a);if(n>=o||n<0)return{error:this._formatterErrors.fraction,res:!1};if(void 0!==a&&s>=a||s<0)return{error:this._formatterErrors.secondFraction,res:!1};let c=void 0!==a?r+n/o+s/(o*a):NaN;return t&&(c=-c),{value:c,res:!0,suggest:this.format(c)}}return{error:this._formatterErrors.custom,res:!1}}}},222255:(t,e,r)=>{r.d(e,{makeTemplateSymbolUrl:()=>m,makeSymbolPageUrl:()=>u});var i=r(384809),o=r(950569),a=r(620031),n=r(36715);r(889267);function s(t){const e={shortName:t.shortName,exchange:t.exchange,proName:t.proName,type:t.type};return t.proName&&t.proName.includes(":")&&([e.exchange,e.shortName]=t.proName.split(":")),e}function c(t,e){const r=encodeURIComponent(e.shortName||""),i=encodeURIComponent(e.exchange||""),o=encodeURIComponent(e.proName||"");return t.replace("{tvexchange}",i).replace("{tvsymbol}",r).replace("{tvprosymbol}",o)}function l(t,e=""){const r=["UKOIL","USOIL","XAGAUD","XAGCAD","XAGCHF","XAGEUR","XAGGBP","XAGHKD","XAGJPY","XAGUSD","XAUAUD","XAUCAD","XAUCHF","XAUEUR","XAUGBP","XAUHKD","XAUJPY","XAUNZD","XAUUSD","XPDUSD","XPTUSD","SPX"];return void 0===t.shortName&&void 0===t.proName?(console.warn("Params missed"),"/"):p(t)?t.exchange?"/symbols/{tvsymbol}/?exchange={tvexchange}":`/symbols/{tvsymbol}/${e}`:t.exchange||t.proName?t.shortName&&r.includes(t.shortName)?`/symbols/{tvsymbol}/${e}`:`/symbols/{tvexchange}-{tvsymbol}/${e}`:`/symbols/{tvsymbol}/${e}`}function m(t,e){let r=t;if(!/{tvsymbol}|{tvexchange}|{tvprosymbol}/.test(t)){let i="tvprosymbol";void 0===e.proName&&(i="tvsymbol"),r=`${t}?tvwidgetsymbol={${i}}`}const i=c(r,s(e));if(!(0,a.isSafeUrl)(i))throw new Error(`The symbol URL ${i} is not allowed.`);return i}function h(t,e,r,a){const n=(window.locale_domains?(0,o.determineBaseUrl)(window.locale_domains,a):window.location.origin)+c(t,s(e));return r?(0,i.addUtmToUrl)(n,r):n}function u(t,e,r,i){return h(l(t,i),t,e,r)}function p(t){return!!t.type&&(0,n.isCurrencySymbol)(t.type,t.typespecs)}},588565:(t,e,r)=>{function i(t){return t.reduce((function(t,e,r){return~t.indexOf(e)||t.push(e),t}),[])}r.r(e),r.d(e,{uniq:()=>i})}}]);